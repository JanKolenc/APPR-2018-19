---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Jan Kolenc"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex

---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Prikazal bom stopnjo in prag tveganja revščine v Sloveniji. Prikazal bom kakšno je tveganje po statističnih regijah in kako na tveganje upliva stopnja izobrazbe starost in velikost družine.

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Uvozil sem podatke o revščini v obliki CSV s statističnega urada. 
Podatke imam v 3 razpredelnicah v obliki *tidy data* ki sem jih dejansko razbil na 34 razpredelnic po letih.

sl <- locale("sl", encoding = "Windows-1250", decimal_mark=".")
izobrazba <- read_delim("podatki/izobrazba.csv", ";", na="-", locale=sl,
                        col_names=c("1", "Starost", "Izobrazba", "Spol", 2008:2017)) %>%
  select(-1) %>% melt(id.vars=1:3, variable.name="Leto",
                      value.name="Odstotki", na.rm=TRUE) %>%
  mutate(Leto=parse_number(Leto))

